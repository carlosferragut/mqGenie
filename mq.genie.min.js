/*!
* mqGenie v0.3
*
* Adjusts CSS media queries in browsers that include the scrollbar's width in the viewport width so they fire at the intended size
*
* Returns the mqGenie object containing .adjusted, .width & fontSize for use in re-calculating media queries in JavaScript with mqAdjust(string)
*
* Copyright (c) 2013 Matt Stow
*
* http://mattstow.com
*
* Licensed under the MIT license
*/
;(function(){if(!document.addEventListener)return;window.cssjs=function(){function e(e,t){var n=e.cssRules?e.cssRules:e.media,r,i=[],s=0,o=n.length;for(s;s<o;s++){r=n[s];if(t(r))i.push(r)}return i}function t(t){return e(t,function(e){return e.constructor===CSSMediaRule})}function n(e){var t=window.location,n=document.createElement("a");n.href=e;return n.hostname===t.hostname&&n.port===t.port&&n.protocol===t.protocol}function r(e){return e.ownerNode.constructor===HTMLStyleElement}function i(e){return e.href&&n(e.href)}function s(){var e=document.styleSheets,t,n=e.length,s=0,o=[];for(s;s<n;s++){t=e[s];if(i(t)||r(t))o.push(t)}return o}return{getStylesheets:s,getMediaQueries:t}}();document.addEventListener("DOMContentLoaded",function(){window.mqGenie=function(){var e=document.documentElement;if(window.getComputedStyle&&window.getComputedStyle(e).getPropertyValue("overflow-y")!="scroll")e.style.overflowY="scroll";var t=window.innerWidth-e.clientWidth,n={adjusted:t>0,width:t,fontSize:16};if("WebkitAppearance"in e.style){var r=/Chrome\/(\d*?\.\d*?\.\d*?\.\d*?)\s/g,i=navigator.userAgent.match(r),s;if(i){i=i[0].replace(r,"$1");s=i.split(".");s[0]=parseInt(s[0]);s[2]=parseInt(s[2]);s[3]=parseInt(s[3]);if(s[0]<=29){if(s[0]===29&&s[2]<1548&&s[3]<57){n.adjusted=false}else if(s[0]<29){n.adjusted=false}}}else{n.adjusted=false}}if(n.adjusted){var o,u;if(window.getComputedStyle)n.fontSize=parseFloat(window.getComputedStyle(e).getPropertyValue("font-size"));var a=cssjs.getStylesheets(),f=0;for(f;f<a.length;f++){o=cssjs.getMediaQueries(a[f]);for(var l=0;l<o.length;l++){u=o[l].media.mediaText.replace(/\d+px/gi,function(e){return parseInt(e,10)+n.width+"px"});u=u.replace(/\d.+?em/gi,function(e){return(parseFloat(e)*n.fontSize+n.width)/n.fontSize+"em"});o[l].media.mediaText=u}}}return n}();window.mqAdjust=function(e){if(!mqGenie.adjusted)return e;var t=e.replace(/\d+px/gi,function(e){return parseInt(e,10)+mqGenie.width+"px"});t=t.replace(/\d.+?em/gi,function(e){return(parseFloat(e)*mqGenie.fontSize+mqGenie.width)/mqGenie.fontSize+"em"});return t}})})();